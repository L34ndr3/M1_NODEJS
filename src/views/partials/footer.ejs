</main>
<footer class="bg-slate-800 p-6 text-center text-slate-500 mt-8 border-t border-slate-700">
    <p>&copy; 2025 E-Sport Tournament Manager - Projet Master IT</p>
</footer>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem('token');
        const userStr = localStorage.getItem('user');

        // Récupération des éléments du DOM
        const loginLink = document.getElementById('loginLink');
        const registerLink = document.getElementById('registerLink');
        const logoutBtn = document.getElementById('logoutBtn');
        const guestLinks = document.getElementById('guestLinks'); // Si tu utilises le conteneur
        const userLinks = document.getElementById('userLinks');   // Si tu utilises le conteneur
        const usernameDisplay = document.getElementById('usernameDisplay'); // L'endroit où afficher le nom

        if (token && userStr) {
            // --- UTILISATEUR CONNECTÉ ---
            const user = JSON.parse(userStr);

            // 1. On cache les liens invités
            if (loginLink) loginLink.classList.add('hidden');
            if (registerLink) registerLink.classList.add('hidden');
            if (guestLinks) guestLinks.classList.add('hidden');

            // 2. On affiche les éléments utilisateur
            if (logoutBtn) logoutBtn.classList.remove('hidden');
            if (userLinks) userLinks.classList.remove('hidden');

            // 3. On injecte le lien vers le profil
            if (usernameDisplay) {
                usernameDisplay.innerHTML = `
                        <a href="/me" class="flex items-center gap-2 hover:text-white transition mr-4">
                            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold text-white">
                                ${user.username.charAt(0).toUpperCase()}
                            </div>
                            <span class="font-medium">${user.username}</span>
                        </a>
                    `;
                // On s'assure qu'il est visible (au cas où il aurait la classe hidden par défaut)
                usernameDisplay.classList.remove('hidden');
                usernameDisplay.classList.add('inline-flex'); // Pour aligner correctement
            }

        } else {
            // --- VISITEUR ---
            if (loginLink) loginLink.classList.remove('hidden');
            if (registerLink) registerLink.classList.remove('hidden');
            if (guestLinks) guestLinks.classList.remove('hidden');

            if (logoutBtn) logoutBtn.classList.add('hidden');
            if (userLinks) userLinks.classList.add('hidden');
            if (usernameDisplay) usernameDisplay.classList.add('hidden');
            if (profil) profil.classList.add('hidden');
        }

        // Gestion de la déconnexion
        if (logoutBtn) {
            logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = '/';
            });
        }
    });
</script>
</body>

</html>